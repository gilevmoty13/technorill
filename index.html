<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TechnoRill — Блог о технике</title>
  <link rel="icon" href="logo1.png" type="image/png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* Базовые стили одинаковые для всех устройств */
    body { 
      margin:0; 
      font-family:Arial,sans-serif; 
      color:#ccc; 
      background:#000 url('logo.png') center/contain no-repeat fixed; 
      font-size:16px;
      line-height:1.5;
    }
    
    * {
      -webkit-tap-highlight-color: transparent;
      box-sizing: border-box;
    }
    
    header { 
      background:rgba(0,0,0,.7); 
      text-align:center; 
      padding:40px 20px;
    }
    
    header img { 
      width:120px; 
      height:auto; 
      border-radius:50%; 
    }
    
    h1 { 
      margin-top:20px; 
      font-size:2.5rem; 
      color:#00cc66; 
    }
    
    .content { 
      max-width:800px; 
      margin:40px auto; 
      background:rgba(0,0,0,.75); 
      padding:30px; 
      border-radius:15px; 
    }
    
    .post { 
      margin-bottom:30px; 
    }
    
    h2 { 
      color:#eee; 
    }
    
    footer { 
      background:rgba(0,0,0,.7); 
      text-align:center; 
      padding:20px; 
      color:#888; 
    }
    
    a { 
      color:#00cc66; 
      cursor:pointer; 
      text-decoration:none; 
      border-bottom:1px dashed #00cc66; 
    }
    
    a:hover { 
      color:#00ff80; 
      border-bottom:1px solid #00ff80; 
    }
    
    .notification { 
      position:fixed; 
      top:20px; 
      right:20px; 
      background:rgba(0,200,100,.9); 
      color:#fff; 
      padding:10px 20px; 
      border-radius:5px; 
      display:none; 
      z-index:1000; 
    }

    /* Табы - одинаковые для всех устройств */
    .tabs { 
      display:flex; 
      justify-content:center; 
      margin-bottom:30px; 
      border-bottom:1px solid #333; 
      flex-wrap: wrap;
    }
    
    .tab { 
      padding:12px 20px; 
      cursor:pointer; 
      color:#888; 
      border-bottom:3px solid transparent; 
      transition:all .3s; 
      text-align: center;
      min-width: 140px;
    }
    
    .tab.active { 
      color:#00cc66; 
      border-bottom:3px solid #00cc66; 
    }
    
    .tab:hover { 
      color:#00ff80; 
    }
    
    .tab-content { 
      display:none; 
    }
    
    .tab-content.active { 
      display:block; 
    }

    .news-item { 
      background:rgba(30,30,30,.5); 
      padding:15px; 
      margin-bottom:20px; 
      border-radius:8px; 
      border-left:3px solid #00cc66; 
    }
    
    .news-date { 
      color:#888; 
      font-size:.9em; 
      margin-bottom:5px; 
    }
    
    .social-links { 
      display:flex; 
      flex-direction:column; 
      gap:15px; 
      margin-top:20px; 
    }
    
    .social-link { 
      display:flex; 
      align-items:center; 
      padding:12px 15px; 
      background:rgba(50,50,50,.5); 
      border-radius:8px; 
      transition:all .3s; 
      text-decoration:none; 
      border:1px solid transparent; 
    }
    
    .social-link:hover { 
      background:rgba(70,70,70,.7); 
      border-color:#00cc66; 
      transform:translateY(-2px); 
    }
    
    .social-icon { 
      font-size:24px; 
      margin-right:15px; 
      width:30px; 
      text-align:center; 
    }
    
    .tiktok-icon { 
      color:#fff; 
    }
    
    .youtube-icon { 
      color:#f00; 
    }
    
    .instagram-icon { 
      color:#E4405F; 
    }

    #contacts .post { 
      text-align:center; 
      display:flex; 
      flex-direction:column; 
      align-items:center; 
    }
    
    #contacts .social-links { 
      width:100%; 
      max-width:400px; 
      margin:0 auto; 
    }
    
    #contacts .social-link { 
      justify-content:center; 
      text-align:left; 
    }

    /* Панель публикации - одинаковая для всех устройств */
    #publishPanel {
      box-sizing:border-box; 
      width:min(560px,96vw);
      right:20px; 
      bottom:20px; 
      max-height:90vh; 
      overflow:auto;
      position:fixed; 
      background:rgba(0,0,0,.95); 
      border:1px solid #00cc66;
      border-radius:12px; 
      padding:20px; 
      z-index:1199; 
      display:none;
      backdrop-filter: blur(5px);
      box-shadow: 0 10px 30px rgba(0,0,0,0.5);
    }
    
    #publishPanel label { 
      display:block; 
      margin:12px 0 6px; 
      font-weight: bold;
    }
    
    #publishPanel textarea { 
      width:100%; 
      min-height:160px; 
      resize:vertical; 
    }
    
    #publishPanel input, #publishPanel textarea, #publishPanel button { 
      box-sizing:border-box; 
    }
    
    #publishPanel input, #publishPanel textarea {
      width:100%; 
      padding:12px; 
      border-radius:10px; 
      border:1px solid #333; 
      background:#000; 
      color:#eee; 
      min-width:0; 
      word-break:break-word;
      font-size: 16px;
    }
    
    #publishPanel .two-col { 
      display:grid; 
      grid-template-columns:1fr 1fr; 
      gap:12px; 
    }
    
    #publishPanel .two-col > div { 
      min-width:0; 
    }
    
    #publishPanel .btn { 
      border:1px solid #00cc66; 
      background:#002d1f; 
      color:#00ff80; 
      border-radius:10px; 
      padding:12px 16px; 
      cursor:pointer; 
      font-size: 16px;
      min-height: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.3s;
    }
    
    #publishPanel .btn:hover {
      background: #004d33;
      transform: translateY(-2px);
    }
    
    #publishPanel .btn-ghost { 
      border-color:#444; 
      background:#111; 
      color:#bbb; 
    }
    
    #publishPanel .hr { 
      height:1px; 
      background:#1f3b2d; 
      margin:20px 0; 
      border:0; 
    }
    
    .muted { 
      color:#9fe6c3; 
      font-size:.9em; 
    }
    
    .row { 
      display:flex; 
      gap:12px; 
      align-items:center; 
      justify-content:space-between; 
    }
    
    .row .btn { 
      flex:0 0 auto; 
    }
    
    .row .grow { 
      flex:1 1 auto; 
    }

    /* Кнопка админа - видна на всех устройствах */
    #adminAccessButton {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: rgba(0, 204, 102, 0.9);
      color: white;
      border: none;
      font-size: 24px;
      z-index: 1000;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    #adminAccessButton:hover {
      background: rgba(0, 255, 128, 0.9);
      transform: scale(1.1);
    }

    /* Модальное окно - одинаковое для всех устройств */
    #adminModal {
      display:none; 
      position:fixed; 
      inset:0; 
      background:rgba(0,0,0,.6);
      z-index:1200; 
      align-items:center; 
      justify-content:center; 
      padding:20px;
    }
    
    #adminModal .modal-card {
      background:#111; 
      border:1px solid #00cc66; 
      border-radius:12px;
      width:min(520px,92vw); 
      max-height:92vh; 
      overflow:auto; 
      padding:24px; 
      box-sizing:border-box; 
      margin:0 auto;
    }
    
    #adminModal h3 { 
      color:#00ff80; 
      margin:0 0 15px; 
      text-align: center;
    }
    
    #adminModal label { 
      display:block; 
      margin:12px 0 6px; 
    }
    
    #adminModal input {
      width:100%; 
      padding:12px; 
      border-radius:8px; 
      border:1px solid #333;
      background:#000; 
      color:#eee; 
      box-sizing:border-box;
      font-size: 16px;
    }
    
    #adminModal .btn-row { 
      display:flex; 
      gap:12px; 
      margin-top:20px; 
    }
    
    #adminModal .btn { 
      padding:12px 16px; 
      border-radius:8px; 
      cursor:pointer; 
      flex: 1;
      font-size: 16px;
    }
    
    #adminModal .btn-primary { 
      border:1px solid #00cc66; 
      background:#002d1f; 
      color:#00ff80; 
    }
    
    #adminModal .btn-ghost { 
      border:1px solid #444; 
      background:#222; 
      color:#bbb; 
    }
    
    #adminErr { 
      color:#ff6b6b; 
      display:none; 
      margin-top:10px; 
      text-align: center;
    }

    /* Адаптивные корректировки только для очень маленьких экранов */
    @media (max-width: 768px) {
      .content {
        margin: 20px 10px;
        padding: 20px;
      }
      
      header {
        padding: 30px 15px;
      }
      
      h1 {
        font-size: 2rem;
      }
    }

    @media (max-width: 600px) {
      .tabs {
        flex-direction: column;
        gap: 5px;
      }
      
      .tab {
        min-width: auto;
        border-radius: 8px;
        border: 1px solid #333;
        margin-bottom: 5px;
      }
      
      .tab.active {
        border-color: #00cc66;
      }
      
      #publishPanel {
        right: 10px;
        left: 10px;
        bottom: 10px;
        width: auto;
        max-height: 85vh;
      }
      
      #publishPanel .two-col {
        grid-template-columns: 1fr;
      }
      
      #adminModal {
        padding: 10px;
      }
    }

    @media (max-width: 400px) {
      header img {
        width: 100px;
      }
      
      h1 {
        font-size: 1.8rem;
      }
      
      .content {
        padding: 15px;
      }
      
      #adminAccessButton {
        width: 50px;
        height: 50px;
        font-size: 20px;
        bottom: 15px;
        right: 15px;
      }
    }
  </style>
</head>
<body>
  <!-- Кнопка доступа к админке - видна на всех устройствах -->
  <button id="adminAccessButton" title="Панель админа (Ctrl+A)">⚙️</button>

  <div class="notification" id="notification">Почта скопирована!</div>

  <header>
    <img src="logo1.png" alt="TechnoRill Logo">
    <h1>TechnoRill</h1>
    <p>Блог о технологиях</p>
  </header>

  <div class="content">
    <div class="tabs">
      <div class="tab active" data-tab="main">Главная</div>
      <div class="tab" data-tab="fresh-news">Свежие новости о технологиях</div>
      <div class="tab" data-tab="news">Последние публикации</div>
      <div class="tab" data-tab="contacts">Контакты</div>
    </div>

    <div id="main" class="tab-content active">
      <div class="post">
        <h1>Добро пожаловать!</h1>
        <p>Канал TechnoRill рассказывает о технике и гаджетах!</p>
      </div>
    </div>

    <div id="fresh-news" class="tab-content">
      <div class="post">
        <h1>Свежие новости о технологиях</h1>
        <p>Здесь публикуются самые новые и интересные новости из мира технологий 🚀</p>
      </div>
    </div>

    <div id="news" class="tab-content">
      <div class="post">
        <h1>Видео за месяц</h1>
        <!-- NEWS-START -->
<div class="news-item" data-id="50e63c35de06b165">
  <div class="news-date">28</div>
  <h3>кек</h3>
  <p>еке</p>
  <div class="social-links">
    <a href="кек"  target="_blank" class="social-link"><i class="fab fa-tiktok social-icon tiktok-icon"></i><div><div class="social-text">TikTok</div></div></a>
    <a href="ек" target="_blank" class="social-link"><i class="fab fa-youtube social-icon youtube-icon"></i><div><div class="social-text">YouTube</div></div></a>
    <a href="еке"   target="_blank" class="social-link"><i class="fab fa-instagram social-icon instagram-icon"></i><div><div class="social-text">Instagram*</div></div></a>
  </div>
</div>

        <div class="news-item">
          <div class="news-date">27 сентября 2025</div>
          <h3>Очищать память на iPhone стало легче?</h3>
          <p>В этом видео ты узнаешь об очень полезном приложении для iPhone!</p>
          <div class="social-links">
            <a href="https://www.tiktok.com/@technorill/video/7553701581309480214" target="_blank" class="social-link">
              <i class="fab fa-tiktok social-icon tiktok-icon"></i><div><div class="social-text">TikTok</div></div>
            </a>
            <a href="https://youtube.com/shorts/Yrtjg5RFcFE" target="_blank" class="social-link">
              <i class="fab fa-youtube social-icon youtube-icon"></i><div><div class="social-text">YouTube</div></div>
            </a>
            <a href="https://www.instagram.com/reel/DO_prhlDivv" target="_blank" class="social-link">
              <i class="fab fa-instagram social-icon instagram-icon"></i><div><div class="social-text">Instagram*</div></div>
            </a>
          </div>
        </div>
        <!-- NEWS-END -->
      </div>
    </div>

    <div id="contacts" class="tab-content">
      <div class="post">
        <h2>Контакты</h2>
        <p>Привет! Меня зовут Кирилл и я ведущий данного канала.</p>
        <p><strong>Почта для предложений:</strong> 
          <span id="email" style="color:#00cc66; cursor:pointer; border-bottom:1px dashed #00cc66; padding:2px 0;">garkovivan8430@gmail.com</span>
          <span style="margin-left:5px; font-size:.9em; color:#888;">(кликните чтобы скопировать)</span>
        </p>
        <p><strong>По вопросам писать:</strong> 
          <a href="https://t.me/kiril_podderzka_Not_Bot" target="_blank" class="telegram-link">t.me/kiril_podderzka_Not_Bot</a>
        </p>
      </div>
    </div>
  </div>

  <footer>
    © 2025 Кирилл.
    <p style="margin-top:10px; font-size:.8em;">*компания Meta признана экстремистской на территории России</p>
  </footer>

  <!-- Модал логина -->
  <div id="adminModal">
    <div class="modal-card">
      <h3>Вход для администратора</h3>
      <label>Логин</label>
      <input id="adminLogin" type="text" placeholder="Логин">
      <label>Пароль</label>
      <input id="adminPass" type="password" placeholder="Пароль">
      <div class="btn-row">
        <button id="adminLoginBtn" class="btn btn-primary">Войти</button>
        <button id="adminCancelBtn" class="btn btn-ghost">Отмена</button>
      </div>
      <p id="adminErr">Неверные данные</p>
    </div>
  </div>

  <!-- Панель публикации + удаления -->
  <div id="publishPanel">
    <div class="row" style="margin-bottom:12px;">
      <strong style="color:#00ff80; font-size:1.1em;">Публикация новости</strong>
      <button id="closePublish" title="Закрыть" class="btn-ghost btn" style="width:40px; height:40px; font-size:20px; display:flex; align-items:center; justify-content:center;">×</button>
    </div>

    <label>Дата (текст):</label>
    <input id="fDate" type="text" placeholder="27 сентября 2025">

    <label>Заголовок:</label>
    <input id="fTitle" type="text" placeholder="Вышло новое видео!">

    <label>Описание (необязательно):</label>
    <input id="fDesc" type="text" placeholder="Короткое описание">

    <div class="two-col">
      <div>
        <label>TikTok ссылка:</label>
        <input id="fTikTok" type="url" placeholder="https://www.tiktok.com/...">
      </div>
      <div>
        <label>YouTube ссылка:</label>
        <input id="fYouTube" type="url" placeholder="https://youtube.com/...">
      </div>
      <div>
        <label>Instagram ссылка:</label>
        <input id="fInsta" type="url" placeholder="https://www.instagram.com/reel/...">
      </div>
    </div>

    <button id="publishBtn" class="btn" style="width:100%; margin-top:16px;">Опубликовать</button>

    <div id="exportWrap" style="display:none; margin-top:16px;">
      <p class="muted">Скопируй этот HTML и вставь в код (если автосохранение отключено):</p>
      <textarea id="exportHtml" rows="8"></textarea>
      <button id="copyExport" class="btn" style="margin-top:10px;">Скопировать</button>
    </div>

    <hr class="hr">

    <strong style="color:#00ff80; font-size:1.1em;">Удаление публикации</strong>
    <p class="muted">Надёжнее всего удалять по <b>ID</b> (он хранится в карточке как <code>data-id</code>). Если ID нет — укажи заголовок и/или дату.</p>

    <label>ID публикации:</label>
    <input id="delId" type="text" placeholder="например: a1b2c3d4e5f6a7b8">

    <div class="two-col">
      <div>
        <label>Заголовок (для расчёта ID):</label>
        <input id="delTitle" type="text" placeholder="Заголовок новости">
      </div>
      <div>
        <label>Дата (для расчёта ID):</label>
        <input id="delDate" type="text" placeholder="27 сентября 2025">
      </div>
    </div>

    <div class="row" style="margin-top:16px;">
      <button id="deleteBtn" class="btn">Удалить</button>
      <button id="hideAllIds" class="btn-ghost btn">Показать ID на странице</button>
    </div>
  </div>

  <!-- Базовый скрипт страницы -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const emailElement = document.getElementById('email');
      const notification = document.getElementById('notification');
      const adminAccessButton = document.getElementById('adminAccessButton');
      
      if (emailElement) {
        emailElement.addEventListener('click', function() {
          const tempInput = document.createElement('input');
          tempInput.value = 'garkovivan8430@gmail.com';
          document.body.appendChild(tempInput);
          tempInput.select(); 
          tempInput.setSelectionRange(0, 99999);
          try { 
            document.execCommand('copy'); 
            notification.style.display='block'; 
            setTimeout(()=>notification.style.display='none',2000); 
          } catch { 
            navigator.clipboard.writeText('garkovivan8430@gmail.com').then(()=>{ 
              notification.style.display='block'; 
              setTimeout(()=>notification.style.display='none',2000);
            });
          }
          document.body.removeChild(tempInput);
        });
      }
      
      document.querySelectorAll('.tab').forEach(tab=>{
        tab.addEventListener('click', ()=>{
          const target = tab.getAttribute('data-tab');
          document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
          document.querySelectorAll('.tab-content').forEach(c=>c.classList.remove('active'));
          tab.classList.add('active'); 
          document.getElementById(target).classList.add('active');
        });
      });
      
      // Обработчик для кнопки админа
      adminAccessButton.addEventListener('click', openLoginModal);
    });
  </script>

  <!-- Админ-логика (вход + публикация + удаление) -->
  <script>
  (function() {
    const WORKER_BASE = 'https://falling-term-2b37.garkovkirill.workers.dev';
    const ADMIN_KEY = '30Mu30Fasa';

    const SALT = 'trill#2025';
    const HASH_LOGIN = '01001e8a19aa584d87efe4ebbd09ec191267921d39e1f845a4ac932916de1323';
    const HASH_PASS  = '7491d3a47818924589874ef588685df9e0f2e2fd21122f34a4a427b7d9360d46';

    async function sha256Hex(str){ const data=new TextEncoder().encode(SALT+str); const buf=await crypto.subtle.digest('SHA-256',data); return Array.from(new Uint8Array(buf)).map(b=>b.toString(16).padStart(2,'0')).join(''); }

    const enc = new TextEncoder();
    const lower = s => (s??'').toString().replace(/\s+/g,' ').trim().toLowerCase();
    async function makeId(title, date){
      const buf = await crypto.subtle.digest('SHA-256', enc.encode(lower(title)+'|'+lower(date)));
      const hex = Array.from(new Uint8Array(buf)).map(b=>b.toString(16).padStart(2,'0')).join('');
      return hex.slice(0,16);
    }

    const adminModal = document.getElementById('adminModal');
    const adminLoginBtn = document.getElementById('adminLoginBtn');
    const adminCancelBtn= document.getElementById('adminCancelBtn');
    const adminErr = document.getElementById('adminErr');
    const loginInput = document.getElementById('adminLogin');
    const passInput  = document.getElementById('adminPass');

    const PUBLISH_PANEL = document.getElementById('publishPanel');
    const closePublish  = document.getElementById('closePublish');

    const fDate   = document.getElementById('fDate');
    const fTitle  = document.getElementById('fTitle');
    const fDesc   = document.getElementById('