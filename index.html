<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>TechnoRill — Блог о технике</title>
<link rel="icon" href="logo1.png" type="image/png"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

<style>
:root{
  --accent:#00cc66; --accent2:#00ff80; --panel:rgba(0,0,0,.75); --line:#333;
}
*{box-sizing:border-box}
body{margin:0;font-family:Arial,system-ui,sans-serif;color:#ccc;background:#000 url('logo.png') center/contain no-repeat fixed}
header{background:rgba(0,0,0,.7);text-align:center;padding:40px 20px}
header img{width:120px;height:auto;border-radius:50%}
h1{margin:20px 0 0;font-size:2.5rem;color:var(--accent)}
.content{max-width:980px;margin:40px auto;background:var(--panel);padding:30px;border-radius:15px}
.tabs{display:flex;justify-content:center;margin-bottom:30px;border-bottom:1px solid var(--line);gap:12px}
.tab{padding:10px 20px;cursor:pointer;color:#888;border-bottom:3px solid transparent;transition:.25s;border-radius:8px 8px 0 0}
.tab.active{color:var(--accent);border-bottom-color:var(--accent)}
.tab:hover{color:var(--accent2)}
.tab-content{display:none}
.tab-content.active{display:block}
a{color:var(--accent);text-decoration:none;border-bottom:1px dashed var(--accent)}
a:hover{color:var(--accent2);border-bottom-color:var(--accent2)}
footer{background:rgba(0,0,0,.7);text-align:center;padding:20px;color:#888;cursor:pointer}

/* заголовки секций по центру */
#news .post>h1, #fresh .post>h1 { text-align:center }

/* карточки */
.news-item{
  position:relative;background:rgba(30,30,30,.5);padding:16px;margin:16px 0;
  border-radius:12px;border-left:3px solid var(--accent);
}
.news-date{color:#9bb5a7;margin-bottom:6px}
.social-links{display:flex;flex-direction:column;gap:12px;margin-top:14px}
.social-link{display:flex;align-items:center;padding:12px 16px;background:rgba(50,50,50,.52);border-radius:10px;border:1px solid transparent;transition:.2s}
.social-link:hover{background:rgba(70,70,70,.7);border-color:var(--accent);transform:translateY(-1px)}
.social-icon{font-size:22px;margin-right:14px;width:28px;text-align:center}
.tiktok-icon{color:#fff}.youtube-icon{color:#f00}.instagram-icon{color:#E4405F}

/* галерея картинок в «Свежих новостях» */
.news-gallery{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:12px;margin-top:10px}
.news-gallery img{
  width:100%;height:180px;object-fit:cover;border-radius:10px;border:1px solid #2b2b2b;
  cursor:zoom-in;transition:transform .2s ease
}
.news-gallery img:hover{transform:translateY(-1px)}

/* кнопка удаления — в правом верхнем углу карточки, только для админа */
.news-del-btn{
  position:absolute;top:10px;right:10px;padding:6px 10px;border-radius:10px;border:1px solid #444;
  background:#111;color:#bbb;cursor:pointer;font-size:13px;display:none
}
.news-del-btn:hover{border-color:var(--accent);color:var(--accent2)}
.admin-active .news-del-btn{display:inline-flex}

/* плейсхолдер пустого списка */
.news-empty{
  text-align:center;color:#7aa68f;background:rgba(30,30,30,.35);border:1px dashed #2f6;
  padding:16px;border-radius:10px;margin-top:14px
}

/* ---- Панель публикации (модал) ---- */
#publishPanel{
  position:fixed;inset:auto 12px 12px auto;box-sizing:border-box;width:min(560px,96vw);
  max-height:92vh;overflow:auto;background:rgba(0,0,0,.94);border:1px solid var(--accent);
  border-radius:12px;padding:16px;z-index:1200;display:none
}
#publishHeader{display:flex;align-items:center;justify-content:space-between;gap:8px;margin-bottom:8px}
#publishHeader strong{color:var(--accent2)}
#ppToggle{border:1px solid #444;background:#111;color:#bbb;border-radius:8px;padding:6px 10px;cursor:pointer}
#ppCollapse{border:1px solid #444;background:#111;color:#bbb;border-radius:8px;padding:6px 10px;cursor:pointer}
#publishPanel label{display:block;margin:8px 0 6px}
#publishPanel input,#publishPanel textarea{width:100%;padding:10px;border-radius:8px;border:1px solid #333;background:#000;color:#eee}
#publishPanel textarea{min-height:120px;resize:vertical}
#publishPanel .two-col{display:grid;grid-template-columns:1fr 1fr;gap:10px}
#publishPanel .two-col>div{min-width:0}
@media (max-width:560px){
  #publishPanel{left:8px;right:8px;top:8px;bottom:8px;width:auto}
  #publishPanel .two-col{grid-template-columns:1fr}
}
.section-toggle{
  display:grid;grid-template-columns:1fr 1fr;gap:8px;background:#0d0d0d;border:1px solid #2b2b2b;border-radius:12px;padding:8px;margin-bottom:8px
}
.section-toggle button{
  padding:10px;border-radius:10px;border:1px solid #2b2b2b;background:#111;color:#bbb;cursor:pointer
}
.section-toggle button.active{color:var(--accent2);border-color:var(--accent)}

/* ---- Админ логин ---- */
#adminModal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.6);z-index:1300;align-items:center;justify-content:center;padding:12px}
#adminModal .modal-card{background:#111;border:1px solid var(--accent);border-radius:12px;width:min(520px,92vw);max-height:92vh;overflow:auto;padding:20px}
#adminModal h3{color:var(--accent2);margin:0 0 10px}
#adminModal label{display:block;margin:10px 0 6px}
#adminModal input{width:100%;padding:10px;border-radius:8px;border:1px solid #333;background:#000;color:#eee}
#adminModal .btn-row{display:flex;gap:10px;margin-top:14px}
#adminModal .btn{padding:8px 14px;border-radius:8px;cursor:pointer}
#adminModal .btn-primary{border:1px solid var(--accent);background:#002d1f;color:var(--accent2)}
#adminModal .btn-ghost{border:1px solid #444;background:#222;color:#bbb}
#adminErr{color:#ff6b6b;display:none;margin-top:10px}

/* ---- Лайтбокс картинок ---- */
#imgLightbox{position:fixed;inset:0;background:rgba(0,0,0,.9);display:none;align-items:center;justify-content:center;z-index:1400}
#imgLightbox.open{display:flex}
#imgLightbox .lb-wrap{position:relative;max-width:92vw;max-height:92vh}
#imgLightbox img.lb-img{display:block;max-width:100%;max-height:92vh;border-radius:12px;user-select:none;-webkit-user-drag:none;cursor:zoom-out;transform-origin:center}
#imgLightbox .lb-btn{position:absolute;top:50%;transform:translateY(-50%);background:rgba(17,17,17,.8);border:1px solid #444;color:#ddd;border-radius:10px;padding:8px 12px;cursor:pointer}
#imgLightbox .lb-prev{left:-56px} .lb-next{right:-56px}
#imgLightbox .lb-close{top:-46px;right:0;transform:none}
@media (max-width:600px){
  #imgLightbox .lb-prev{left:8px} .lb-next{right:8px}
}
</style>
</head>
<body>
<header>
  <img src="logo1.png" alt="TechnoRill Logo"/>
  <h1>TechnoRill</h1>
  <p>Блог о технологиях</p>
</header>

<div class="content">
  <div class="tabs">
    <div class="tab" data-tab="main">Главная</div>
    <div class="tab" data-tab="fresh">Свежие новости о технологиях</div>
    <div class="tab active" data-tab="news">Последние публикации</div>
    <div class="tab" data-tab="contacts">Контакты</div>
  </div>

  <div id="main" class="tab-content">
    <div class="post">
      <h1 style="text-align:center">Добро пожаловать!</h1>
      <p style="text-align:center">Канал TechnoRill рассказывает о технике и гаджетах!</p>
    </div>
  </div>

  <div id="fresh" class="tab-content">
    <div class="post">
      <h1>Свежие новости о технологиях</h1>
      <!-- FRESH-START -->
<!-- NEWS-ITEM:mg3r6gs532wx:START -->
<div class="news-item" data-id="mg3r6gs532wx" data-section="fresh">
  <button class="news-del-btn" title="Удалить">Удалить</button>
  <div class="news-date">28</div>
  <h3>proverka</h3>
  <p>gfdhhdhhvbdsjjf</p>
  
  <div class="news-gallery"><img src="data:image/jpeg;base64" alt=""><img src="/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBwgHBgkIBwgKCgkLDRYPDQwMDRsUFRAWIB0iIiAdHx8kKDQsJCYxJx8fLT0tMTU3Ojo6Iys/RD84QzQ5OjcBCgoKDQwNGg8PGjclHyU3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3N//AABEIAJQAlgMBEQACEQEDEQH/xAAbAAEAAQUBAAAAAAAAAAAAAAAABQECAwQGB//EADcQAAEDAgQEBAMFCQEAAAAAAAEAAgMEEQUSITEGE0FRImFxgQcUkTJCUqHwFSMzYrHB0eHxQ//EABsBAQACAwEBAAAAAAAAAAAAAAAFBgEDBAIH/8QAMxEAAQMCBAQDCAMBAAMAAAAAAQACAwQRBRIhMQZBUWETInEUgZGhscHR8DJC4fEjM1L/2gAMAwEAAhEDEQA/AOaX0lV5ERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERUJsiXCHQXK8hwJsCvRaWi5CqvS8oiIiIiIiIiIiIiIiIiIiIiIiIiIiKiIr2RFwudB+arWJcQxwEx0/mcOfIfkq3YRwtLVAS1Ryt6f2P4Hz9FnaxrdgqjUV9VUm8jye19Pgr1S4XR0gtDGB3tr8d1Vcgc4G4Oq7i1pFiNFO4NwZW4zTCqbLHSwO1jdIC4v8AO3bzuu2HjB+HnwpbyD11Hv8At81QsfoaB7yIG5ZBvb+PvHX0t3XPClmfWOpIGGeYSGNrYQXZiDbTy/svooroRSiqldkaQDqbWuL29VSvCdnLGi5ClarhLG6WifWT0WWKNuZ4D2lzR3IBUPBxbhM84gZJqTYaG1z37rodQzNbmIUGrIuNERERVREREREREREREGugFytM9RFAzPK4Ad1vp6Wapf4cLS49v3T3rIIXHc28gq7UcUQt0hYXdzoPyrXS8G1DxeokDew1P2+6qIR+JyjjxTVE6Mb8/wAhSreC6MDzSv8Al+CqiFoNzcrTUcR1M8Jjyht+Yuuik4To6adsxcXW5G1vosir6tCIsoiL0vhaDEa7huGGorWwU5j5cTqZtpgweEXcbgbdB7qu1j4oqklrbnnfb996o2ImKOscWDY3N9r7/BOB8Ep8MlxM3bJUx1JhD7C7YwAW+5BBPt2W/FsUnqoYYnHyNF7dzf6bDoFzVgjfP7Q1ti8An120+Ch+L+Mp3MqsKpqGSmz5ony1HhcRscrfMdVbOG+E4nujrZZg61iGtN7HcXPbmLKArK4tvG1pHc/ZcHlNl9MUPdXMie9rnMY94YLuLWkgDuVrknjjID3AX2uQL+iy27thdW2K2rF1RFlFlERERERZsgGY2C466sZRwGZ/L5lduHUElfUtgj57noOq2WNDQAF82rKyasl8SU/4vrlBQQUMIihHqeZ9VVcq7VsUlDWVub5Olmny/a5bCbLxJLHH/MgLRNVQQaSPAV+GYdU4nXNoqVg5xvfPoGAbk+i8zTMiYXuOi8VNZFTw+K46crc1M1XBmI02IUlIJIpRUXtK24DAPtEj027+S5I8ShfG5+otyUazHIXRucW2I5df3mumhwPhnCJaairWxT1dT4WGpbnLzoNBsNVGmqrZw6SO4aOihX1tfUh0jSQ0b20AUdxpwtSU1E/EsNjbAIrc6FujC2+47H8l0YfXyPf4Umt9iu3CsUlMohlNwdjz/wCKQ+GtTzsElp3b087gB/K4Aj8yfoufF47TB/UfTT8LmxyLJVZh/YA/b7LJLhWJHjZ9XR1TqekMMck4tcSm5GW3ezd+l1IQ19C3BTTzR5pcxynm0WGt/lbY81X3id07SHWaB9yfupvHIqOTCqo18THwsicXZmg2AF9PNQ+HPqI6qP2ckOJAFvXZbZQwsOfZca/AsFwpmCSV0md73ZqhzjdrxkJvb8OayuzcaxnEjVspwbAaAaFvmA0PXLe/yUWaelp/DMh/3RY5+JKanOMMw+jaDWP/AHctrDLkDbkeziB5+q6KfhWqqBTOqpdGDUbkHMXWB26X6a7rS/E4ml4jbqea410GUAL6MHKJDlheyy9grYCrD2CzdelRZRdz8P8AhnD8TpJMQxBnzFpDGyFx8It1I6nXqvm/GPEFbSVIpKY5BYEkbm99L8gLclLUFLG9md4us3HnCtFR4ecSwunEHKI50cf2S06ZrdLG23S65+EuJaqWrFHVvzB38SdwfXofrZeq6jY1meMWtuuEgHicVYOKnn/xM5an36flWPgqNt55OflHu1UzgGCVOOVZhgIjjjAMsrhcNB206nyVIqaltOzM7UnYK219eyjYCRcnYLr5fh5R/L/uq+pE1tHvDS2/pYf1UQMYkzatFlAjH6gOuWi3T9KluEIvkKA4VMxrKmlcTIBs8OJLXjuD/UELmr3eJJ4o2P25KPrpfHmMw2d8u3u/1bFLgsVPxFU4rHlBnhDHMt96+p97N+i1yVJfTthPIrW6qe+BsJ2BJCkHvh+cZEbc/lOc3ybdt/zyrmAdkJ5LntzWljNR8jG2rhwyWuqB4GiJozNG+51A9LrfTs8Q5C/KO62wRiR2QuDR32XIcUv4kqsGdU18cNHR5256VjrvtfQuPXW2g/0paiFGybJGczuv4U3hwomVQY27ncidr9h9ysPw3rhBitRSyOsKiO7bndzTt62J+i94tEXxB45fddGPw3jZKOWnx/fmuix/in9l4rDBCxlTHyyZ42usWG4tr3309F04Jwy/E6V8pdlsRlJGh6/bVUWsxAUzw21+qgcW4grcdDaOmpzFC86xsOZ0ltdTbQK0YZw7R4KfbKqUEjbkB+T+2UZUV8tYPBibofiot2G1YkbHJBNmI8N2nbyO3spmPHMLAuyQC56W176fNczsPrCPM06d/wDVqwYbL+9mH8MOy5nuDGtO9rmwv5LNOyCimdK6W+bUDU6H4/8AFJVuIz4lTxwthAyaE6XJAt7tOWqS0jwxz2uhla0XcYZ2SZPUNJt7qShxGnldla7VRL6WeMZnN0UfLHb7KkGla2uWfCIMNqKtlLiRqI+c4NZPC9oDSdrtIPXrdRGLz4nTxOqKQtIaLlpBuQOhB+wXfTeE4hr7i/NWcQ4PNgeJvpJ3h7bB8cgFs7T5dDe4WzA8ZjxWkE7RYjQjofwVmop3QyZFMfDvF/2fjBo5XEU9ZZuuzXjY++30UDxvhXtVEKpg80e/dp3+G/xXTh02STIef1XqVTAyrppYJhmilaWOHcHQr5JHK+GQSMNnNNx6hTZaCCCvDq2kkwzEaijnN3QPLHHuOh+lj7r7ZVsGNYZHUwjzWuPo4fvRaMBxBuGVzmSnyO0J6dD+V6P8MxH+xahwIMhqDm9MosvkuME+MAdrfdWHHCTVDpYWUN8/iFN8QuU+eYtkqRGYi45TG4aadgLG/ku3wYn0F7Da/vXWaenfhWcNFwN+d7/ui6HjCuODVGG4rGCbSmCVo+/G4FxHqMtwo/D4/Ha+E9Lj12+6jMPp/as8Pa49Qf8AV0lPPFUwRzwPD45GhzHDqCo57HMOVw1CjyC0kHkuC4zxmow7iukmpHNLqemGZh2cHOOZp9mtU7h1MyWlc1/M/pViwuhZU0jw7mdD0t/1ScXH2FPgDpoqmOW2sYZm/PZczsImBsCCFyOwOsDrAAjrf9K5bifimbHA2CKIwUbHZshdd0hGxPb0UnR0IpvNe7voprDsKFKfEebu+QXPsjEjtQCArRglD7TPncPK35nkuDijFvYaMxsPnfoOw5n7KQgiAAAFgOyvJK+QFdvwfRMjojUuAL55iw+TGgm3uR+rL5ZxhWPkrvA/qwD4nn8LKzYPEGweJzd9ApeoaOWXmxJjDj5uyyO/x9AqqwkGw/RoFLLxP4zxGLimJplL43U+YRH7LHZnBxA6Zi25VtwiV0lNZ39TYem9vcuaQWcuMwetdheKUtbFZphkBP8AM3ZzfQtJHupS5GoWsi4svTpmBuYNzFrdiRqQr1FKHsDuoVWc0teW9Cpjhrhp1ZUxVtZJDFRQuEh/etc59tQNDoL73+iqHEPFEcUL6Sma4yOFtWkWv6jU9LfFS1FQuLhI+1h33+C0/iBitPiuMtNG8Php4+XzAdHm9yR5dF3cGYZNQ0LjOLOeb2PIbC/cr1XzNklAbyXN3I1aS0jUOBsQe6tzmhwyuFwVwgkG43XtXCuMDGcGhqT/ABh4Jm9njf67+6+A45hhwyufT/13aex2/HqFZqabxow5RPEnBrMcxiGsFQIGZMtQGtu59trdOp18gpbBOKZcKon07WZje7b7C+97anlotFRRtnkDibdVIUmF4XwrRVVXAZ2QNjzzZnuffL1t39N1FT1lZjNU1r7F7jYWAG/w+eq7C/w4Qwnyt27LcpThmIvjxKmFPPIxtmTtsS0dr9FxzRVVK408oLT0OiyyYuZZjvKVw3xBxqDEKmCipXiSOmJdI9p0znQAHrYX+ql8LpnRML3i19vRWnA6N8YMzxa4sFq8N8Wz4JTmllg+ZprksGfKY79AbahbKzD21Ds4NjzW7EMIFTJ4jDZx3791EYtiMuK4jNXTNDHSkWYDcNAFgL9V2QQiGMRjkpGiphSwiIarTW1daLbBC+eRsbBclaKmojpoXTSmzWi5W1TsAsvo1JSMpIREzl8yviWLYhJiFU6ok57DoBspGBq2OKi1MUGNSYdhVXCW+OJ/Npz+IEZXD1F7+6+ccTYc99aKgt8jgG37j99NFdeHo4Zg2HNrqSOgvyPP7KJwbiSvOIwtqJeZG9wBbaw2t/TT3URUUUQjJAsVcqvD4BCS0WIXF/FNxrMeZiTJ2y00sQiZ4cpjLL3Bvve+YHzt0KmaCAwU4YRY8/eqdM0tcCba6ixvouVwyidiNbFTDMGueBI9rS7lt6k28rrssbXAXhrczg0bn3fVer1UoqZXzhhY2Q5msO7R0B9ArlRMDadgHRVasv7Q/UHUi41GnQqNqYmEhxY0kbaBSDSV4atSS4Jt3WwAHdbwrF7XpdFwTxAzAq97aouFHUACS2uRw2db8j/pVHi3AX4pA2SAf+Rm3K4PK/zC7qKpELiHbFeiTcXcPxwmT9qU7wPuxnM76DVfMY+GsXe/IKd3vFvmdFLmrgA/kFwXFvGEuNRmio4zBQ38RcfFLba/YeS+i8OcJNw54qakh0g2A2b+SoqqrvFGRmgXKZWk3LRf0VylijlbkkAI7rjimkheJIzZw5rMyQtABFwNrKtVfDMbzmp3Zex1Hx3HzVvoeMZo/LVMzdxofht9Fka9p0uq3VYTWUusjNOo1CttDjtBWeWKQZuh0Pz39yu3UcFLoiKjdXBXXh/D/Cj9pePM7bsP9+i+acW4v48vscZ8rN+7unoPqpCFT7lRnKSp27LneVhg1UnFhlJVUr3T1kbI+WeYHeEsdbudLdb3udrKi41iFUS6jMJJLgWka3aDcab35HkrNhIZTytqmO2Go77FYMM4UjfAaqlqRUF7C6Lpe4Bt9CRr2UFHXinrGNqmWDXeYc9D9jY91ZK/FH1dG6OHdwOvqrsGxXBqF8keL0zZBOXMc6SEyNY1ujmZdiSbajz7a22oq5KzzMacnLQ691CUuFspvLmGewJu4DQ6je3vH2TGq7hx8dJS8PQQxNZcFsUJisPMW11I9LHuvdDUOp5gxwIDtNQRry3XjEsNdLTukFrs10LTpzvYqJnarU0qpLQmbmIF2i/VxsB6lbwbLaxMaww4bNGx0rJhIzO3J0Fh1+q801R44JAtZdJGXRRa61lERPZYRVARLoAi83VwCJdLLCXV7bjzUNXYLS1QvbK7qPuFPYbxHW0Nml2dnQ/Y7j6K++mirMeBzNrWQyjynnyIG6uU3E9NJhslRAbPAtY7gnQeo7hXRjxBXvS2i+WPJOp3W9EtRXO5SETnct3Ltny+G+11xz5spy7r3Bk8QZ9r++3NRVTU1M1M+Opp3GRuV4OW2QC++nW/5BQNLX1Uc3njLjtYK51GDYe6MGCoY1p5kk7fj43WGhfLIyenbBJIx4DnCG5NxcA9O694jUOq2ASUzgdbGwv+7LXR0UdHK2WOsjNjsSfwVkqXvjoYIZaaVj4yTmeLAg9v13XnC6qalaGmF7tLGw736rOJ0kNZUPmFTGMxvuelunZYKeV8kUsUcT3O8LxkFy1w/tqvWJVjqsCMQuD26jTn1stmGULaGTx3VEbozdp1OotqL2tfYqaZciP5q4uRzMo1t/mymafxfCGe2eyptR4Pju8K+S+l97LRreXmfyc3Lv4c+9vNd0Wa3m3Xltr6KPmc5zruJd6lb2tA2C3hYLL2vauARYuq2RYuqgLCKoal1i6uDFi6xdXZFi6xdXWWFi6rosIqNdYoUIWyyRo3I0Wp7mt3K1lpW/Dz7tDYpDe1jlNre3lsqzimKNbb2aZmhOa5HLTb135+q6qH2MF3tPTS3/fsrIaaWq5zauGeN0pBblGpAP8AxcmH4jT55ppXjcb+lv2ylcWmpmRQQ08gdkac1tgSbkXW3RU0VBE8U0bzIfvFmpJGgJtt+rLfWYnGY80Ejc1+ZA2Otuvy9VGQPhc8CY2amJUkNc4OfLIHNGUG1iRva3kVuosQj8EPme0OsCdRp37XWJHxtefDN2qPp2tpcQMbXlzSwkvdt5d9NFzzzubXuMVi4t27323U4xkcuCDObWk16i7VmqJWk+Ak2+1rfXy8vYKcw/2gwg1IAd2+/dVupEIlPg6tWuZ2tp54jCxzpLWkduyx6eq7spL2uva3JeWnS3VRzhddIWwLFZel7ursqXWLq4NWLrF1cG2WLrBKrZYJWFfGx0jssTHPd+FouVzz1UNOwvlcGgdUW5BhVdMxz2wOaBYjPpmv2UPUcTYfBIGZ829yNhb9tovDpWN3K24eHatxIlljZa21zfuoebjaAAeDGTvvp6dfU9B3Ws1LBstyPhqH/wBKiV3ivYAC7eyiJeMq5w8jWjTod+u61Oq+gWzFw/QRuDix0hF78x17rgm4nxOYFviWv0Fv2/P5WXg1Tzst2Gkp6dobDBG0AW0b09VETVVRM4ukeSTrqT++nTktRkedyq2mzktezINhb9ea13ZZLttrdVa2YWzyMNuzd1glvRCWW2V3jDSXEOPQNFljy8l58pWpXy1raSQ00TecG+G5zfQfrotsTYs4znRd2HspXVLG1LrMvr+2P7zG60sHNa5shropXxFjQGSxtudNeuy3z+GCMlgb91MY+3DQWew2vd18pJG/16EG1vctyWjpp7Z6NwNrXAAsB6Fe4MQq6f8A9cpHPf8Ab+9QAke3ZwWhV8PNMQ+TldnAtaU6OPcm39lP0XGFTG8e0jM3tuPTXX3le2VOvmCiKjB66B4ZyubcXvDdwH1AVqpOKsOnaS93h2/+ra+liV0tmY4XBt6qPDR1VjzCy23V+VeXPa3VxssLepcJrKnIWQljXtLmvfoNP86KAreJaGlzNvmc0gWHfv2599FqdKxu5UpT8Ntsx1RM4n7zGbel1WKrjSocXCBgA5E6n38vTp3Wh1WP6hSEOC0MTS0wiS7s136ka3A9FBT4/iM7g50pFhbTT9P6FpdUSFbsUEMX8KJjNLeFoGiinyvk/m4n1N1qc9ztyslgvC8ol0REQgHdYRYjCwggtFiLL3nK9ZyEjgjjcXMbYnf/AIheXbrLnl26yrwvCIiLKIABsiIsIiIiyijoMFooJua2Mk2IDXG4Fxbr+tVMVOPV9TEI5H6dtL635fugXQ6pe4WWWDDKOnldJDC1rnXGmwBtpb2XLPidZUMDJZCQOp9d+u/7ZeHTvcLErbAtsuFalVYRERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERERf//Z" alt=""></div>
  <div class="social-links">
    
    
    
  </div>
</div>
<!-- NEWS-ITEM:mg3r6gs532wx:END -->
<!-- FRESH-END -->
      <div class="news-empty" id="fresh-empty">Пока здесь пусто. Опубликуй первую новость через админ-панель.</div>
    </div>
  </div>

  <div id="news" class="tab-content active">
    <div class="post">
      <h1>Видео за месяц</h1>
      <!-- NEWS-START -->
<!-- NEWS-END -->
      <div class="news-empty" id="news-empty">Пока здесь пусто. Опубликуй первую новость через админ-панель.</div>
    </div>
  </div>

  <div id="contacts" class="tab-content">
    <div class="post" style="text-align:center">
      <h2>Контакты</h2>
      <p>Привет! Меня зовут Кирилл и я ведущий данного канала.</p>
      <p><strong>Почта:</strong>
        <span id="email" style="color:var(--accent);cursor:pointer;border-bottom:1px dashed var(--accent)">garkovivan8430@gmail.com</span>
        <span style="margin-left:5px;font-size:.9em;color:#888">(кликните чтобы скопировать)</span>
      </p>
      <p><strong>По вопросам писать:</strong>
        <a href="https://t.me/kiril_podderzka_Not_Bot" target="_blank">t.me/kiril_podderzka_Not_Bot</a>
      </p>
    </div>
  </div>
</div>

<footer title="Админ-вход (клик по копирайту)">© 2025 Кирилл.</footer>

<!-- Модал логина -->
<div id="adminModal">
  <div class="modal-card">
    <h3>Вход для администратора</h3>
    <label>Логин</label>
    <input id="adminLogin" type="text" placeholder="Логин"/>
    <label>Пароль</label>
    <input id="adminPass" type="password" placeholder="Пароль"/>
    <div class="btn-row">
      <button id="adminLoginBtn" class="btn btn-primary">Войти</button>
      <button id="adminCancelBtn" class="btn btn-ghost">Отмена</button>
    </div>
    <p id="adminErr">Неверные данные</p>
  </div>
</div>

<!-- Панель публикации (сворачиваемая) -->
<div id="publishPanel" aria-hidden="true">
  <div id="publishHeader">
    <strong>Публикация новости</strong>
    <div>
      <button id="ppToggle" title="Свернуть/развернуть">▾</button>
      <button id="ppCollapse" title="Закрыть">✕</button>
    </div>
  </div>

  <label>Куда публиковать</label>
  <div class="section-toggle" id="destSwitch">
    <button data-section="news" class="active">Последние публикации</button>
    <button data-section="fresh">Свежие новости о технологиях</button>
  </div>

  <div id="fields-common">
    <label>Дата (текст):</label>
    <input id="fDate" type="text" placeholder="27 сентября 2025"/>
    <label>Заголовок:</label>
    <input id="fTitle" type="text" placeholder="Заголовок"/>
    <label>Описание (необязательно):</label>
    <textarea id="fDesc" placeholder="Короткое описание"></textarea>
  </div>

  <div id="fields-news">
    <div class="two-col">
      <div>
        <label>TikTok ссылка:</label>
        <input id="fTikTok" type="url" placeholder="https://www.tiktok.com/..."/>
      </div>
      <div>
        <label>YouTube ссылка:</label>
        <input id="fYouTube" type="url" placeholder="https://youtube.com/..."/>
      </div>
      <div>
        <label>Instagram ссылка:</label>
        <input id="fInsta" type="url" placeholder="https://www.instagram.com/reel/..."/>
      </div>
    </div>
  </div>

  <div id="fields-fresh" style="display:none">
    <label>Ссылки на картинки (каждую с новой строки или через запятую):</label>
    <textarea id="fImages" placeholder="https://...jpg
https://...png"></textarea>
  </div>

  <button id="publishBtn" style="margin-top:12px;padding:10px 14px;border-radius:8px;border:1px solid var(--accent);background:#002d1f;color:var(--accent2);cursor:pointer;width:100%">Опубликовать</button>
</div>

<!-- Лайтбокс -->
<div id="imgLightbox" aria-hidden="true">
  <div class="lb-wrap">
    <img class="lb-img" src="" alt="">
    <button class="lb-btn lb-prev" title="Предыдущее">⟨</button>
    <button class="lb-btn lb-next" title="Следующее">⟩</button>
    <button class="lb-btn lb-close" title="Закрыть">✕</button>
  </div>
</div>

<script>
/* вкладки + копирование почты + открытие логина по клику на футер */
document.addEventListener('DOMContentLoaded', () => {
  const email = document.getElementById('email');
  email?.addEventListener('click', () => navigator.clipboard.writeText(email.textContent.trim()));

  document.querySelectorAll('.tab').forEach(t=>{
    t.addEventListener('click', ()=>{
      const id = t.getAttribute('data-tab');
      document.querySelectorAll('.tab').forEach(x=>x.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(x=>x.classList.remove('active'));
      t.classList.add('active');
      document.getElementById(id).classList.add('active');
    });
  });

  document.querySelector('footer')?.addEventListener('click', openLoginModal);
});
</script>

<script>
/* ====== Админ логика + публикация/удаление ====== */
(function(){
  const WORKER_BASE = 'https://falling-term-2b37.garkovkirill.workers.dev';
  const ADMIN_HEADER = '30Mu30Fasa';

  const SALT='trill#2025';
  const HASH_LOGIN='01001e8a19aa584d87efe4ebbd09ec191267921d39e1f845a4ac932916de1323';
  const HASH_PASS ='7491d3a47818924589874ef588685df9e0f2e2fd21122f34a4a427b7d9360d46';
  async function sha256Hex(s){
    const b=await crypto.subtle.digest('SHA-256', new TextEncoder().encode(SALT+s));
    return [...new Uint8Array(b)].map(x=>x.toString(16).padStart(2,'0')).join('');
  }

  /* DOM */
  const adminModal = document.getElementById('adminModal');
  const adminLoginBtn = document.getElementById('adminLoginBtn');
  const adminCancelBtn= document.getElementById('adminCancelBtn');
  const adminErr      = document.getElementById('adminErr');
  const loginInput    = document.getElementById('adminLogin');
  const passInput     = document.getElementById('adminPass');

  const PUBLISH_PANEL = document.getElementById('publishPanel');
  const ppToggle      = document.getElementById('ppToggle');
  const ppClose       = document.getElementById('ppCollapse');
  const destSwitch    = document.getElementById('destSwitch');

  const fDate=document.getElementById('fDate');
  const fTitle=document.getElementById('fTitle');
  const fDesc =document.getElementById('fDesc');
  const fTikTok=document.getElementById('fTikTok');
  const fYouTube=document.getElementById('fYouTube');
  const fInsta=document.getElementById('fInsta');
  const fImages=document.getElementById('fImages');

  const fieldsNews = document.getElementById('fields-news');
  const fieldsFresh= document.getElementById('fields-fresh');

  const publishBtn=document.getElementById('publishBtn');

  /* открытие/закрытие панели */
  ppClose.addEventListener('click', ()=> PUBLISH_PANEL.style.display='none');
  let collapsed=false;
  ppToggle.addEventListener('click', ()=>{
    collapsed = !collapsed;
    PUBLISH_PANEL.querySelectorAll('#fields-common,#fields-news,#fields-fresh,.section-toggle')
      .forEach(el=> el.style.display = collapsed ? 'none' : '');
    publishBtn.style.display = collapsed ? 'none' : '';
    ppToggle.textContent = collapsed ? '▸' : '▾';
  });

  /* выбор раздела */
  let section='news';
  destSwitch.addEventListener('click',(e)=>{
    const btn=e.target.closest('button[data-section]'); if(!btn) return;
    section = btn.dataset.section;
    destSwitch.querySelectorAll('button').forEach(b=>b.classList.toggle('active', b===btn));
    fieldsNews.style.display = section==='news' ? '' : 'none';
    fieldsFresh.style.display= section==='fresh'? '' : 'none';
  });

  /* клавиатура: Ctrl/Cmd + A — логин */
  document.addEventListener('keydown',(e)=>{
    if((e.ctrlKey||e.metaKey) && (e.key==='a'||e.key==='A')){ e.preventDefault(); openLoginModal(); }
    if(e.key==='Escape'){
      if(adminModal.style.display==='flex') adminModal.style.display='none';
      if(PUBLISH_PANEL.style.display==='block') PUBLISH_PANEL.style.display='none';
    }
  });

  adminCancelBtn.addEventListener('click', ()=> adminModal.style.display='none');
  adminLoginBtn.addEventListener('click', tryLogin);
  passInput.addEventListener('keydown', e=>{ if(e.key==='Enter') tryLogin(); });

  function openLoginModal(){
    adminErr.style.display='none'; loginInput.value=''; passInput.value='';
    adminModal.style.display='flex'; setTimeout(()=>loginInput.focus(),0);
  }
  window.openLoginModal = openLoginModal; // для клика по футеру

  async function tryLogin(){
    try{
      const okLogin=(await sha256Hex(loginInput.value.trim()))===HASH_LOGIN;
      const okPass =(await sha256Hex(passInput.value))===HASH_PASS;
      if(okLogin && okPass){
        document.body.classList.add('admin-active');
        adminModal.style.display='none';
        PUBLISH_PANEL.style.display='block';
        PUBLISH_PANEL.scrollTop=0;
        adminErr.style.display='none';
      }else adminErr.style.display='block';
    }catch(e){ console.error(e); adminErr.style.display='block';}
  }

  /* утилиты */
  const uid = ()=> Date.now().toString(36)+Math.random().toString(36).slice(2,6);
  const esc = s => (s??'').toString().replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');

  const newsPost  = document.querySelector('#news .post');
  const freshPost = document.querySelector('#fresh .post');
  function ensureEmptyPlaceholders(){
    const ne = document.getElementById('news-empty');
    const fe = document.getElementById('fresh-empty');
    ne.style.display = newsPost.querySelector('.news-item') ? 'none' : '';
    fe.style.display = freshPost.querySelector('.news-item') ? 'none' : '';
  }
  ensureEmptyPlaceholders();

  function buildNewsHTML(data){
    const link=(href,icon,txt,cls)=> href?`<a href="${href}" target="_blank" class="social-link"><i class="${icon} social-icon ${cls||''}"></i><div><div class="social-text">${txt}</div></div></a>`:'';
    return `<!-- NEWS-ITEM:${esc(data.id)}:START -->
<div class="news-item" data-id="${esc(data.id)}" data-section="news">
  <button class="news-del-btn" title="Удалить">Удалить</button>
  <div class="news-date">${esc(data.date)}</div>
  <h3>${esc(data.title)}</h3>
  ${data.desc?`<p>${esc(data.desc)}</p>`:''}
  <div class="social-links">
    ${link(data.tiktok,'fab fa-tiktok','TikTok','tiktok-icon')}
    ${link(data.youtube,'fab fa-youtube','YouTube','youtube-icon')}
    ${link(data.insta,'fab fa-instagram','Instagram*','instagram-icon')}
  </div>
</div>
<!-- NEWS-ITEM:${esc(data.id)}:END -->`;
  }

  function buildFreshHTML(data){
    const imgs = (data.images||[]).filter(Boolean).map(src=>`<img src="${esc(src)}" alt="">`).join('\n');
    return `<!-- FRESH-ITEM:${esc(data.id)}:START -->
<div class="news-item" data-id="${esc(data.id)}" data-section="fresh">
  <button class="news-del-btn" title="Удалить">Удалить</button>
  <div class="news-date">${esc(data.date)}</div>
  <h3>${esc(data.title)}</h3>
  ${data.desc?`<p>${esc(data.desc)}</p>`:''}
  ${imgs?`<div class="news-gallery">${imgs}</div>`:''}
</div>
<!-- FRESH-ITEM:${esc(data.id)}:END -->`;
  }

  function insertCardDom(html, where){
    const wrap = where==='news' ? newsPost : freshPost;
    const first = wrap.querySelector('.news-item');
    const tmp = document.createElement('div'); tmp.innerHTML = html.trim();
    const card = tmp.firstElementChild.nextElementSibling || tmp.firstElementChild; // пропустить комментарий
    if(first) wrap.insertBefore(card, first); else wrap.appendChild(card);
    ensureEmptyPlaceholders();
    return card;
  }

  /* публикация */
  publishBtn.addEventListener('click', ()=>{
    const data = {
      id: uid(),
      section,
      date: fDate.value.trim() || new Date().toLocaleDateString('ru-RU',{day:'2-digit',month:'long',year:'numeric'}),
      title: fTitle.value.trim(),
      desc: fDesc.value.trim()
    };
    if(!data.title){ alert('Укажи заголовок.'); return; }

    let html='';
    if(section==='news'){
      data.tiktok = fTikTok.value.trim();
      data.youtube= fYouTube.value.trim();
      data.insta  = fInsta.value.trim();
      if(!data.tiktok && !data.youtube && !data.insta){
        alert('Добавь хотя бы одну ссылку.'); return;
      }
      html = buildNewsHTML(data);
    }else{
      const urls = fImages.value.split(/\n|,/).map(s=>s.trim()).filter(Boolean);
      data.images = urls;
      if(!urls.length){ alert('Добавь хотя бы одну картинку.'); return; }
      html = buildFreshHTML(data);
    }

    insertCardDom(html, section);

    // Отправка на воркер
    fetch(WORKER_BASE + '/publish', {
      method:'POST',
      headers:{'Content-Type':'application/json','x-admin-key':ADMIN_HEADER},
      body: JSON.stringify(data)
    }).then(async r=>{
      const text=await r.text(); let json; try{json=JSON.parse(text)}catch{}
      if(!r.ok||!json?.ok){ console.error('Publish error', r.status, text); alert('Ошибка публикации ('+r.status+'): '+text); }
      else console.log('Publish OK');
    }).catch(err=>{ console.error(err); alert('Сетевая ошибка: '+(err?.message||err)); });
  });

  /* удаление (делегировано) */
  document.addEventListener('click',(e)=>{
    const btn = e.target.closest('.news-del-btn'); if(!btn) return;
    const card = btn.closest('.news-item'); if(!card) return;
    const id = card.getAttribute('data-id');
    const sec= card.getAttribute('data-section')||'news';
    if(!confirm('Удалить публикацию?')) return;

    card.remove(); ensureEmptyPlaceholders();

    fetch(WORKER_BASE + '/delete', {
      method:'POST',
      headers:{'Content-Type':'application/json','x-admin-key':ADMIN_HEADER},
      body: JSON.stringify({ id, section: sec })
    }).then(async r=>{
      const text=await r.text(); let json; try{json=JSON.parse(text)}catch{}
      if(!r.ok||!json?.ok){ console.error('Delete error', r.status, text);
        alert('Удаление на сервере не удалось ('+r.status+'). Блок скрыт локально, но вернётся после перезагрузки, если не обновить файл.');
      }
    }).catch(err=>{ console.error(err); alert('Сетевая ошибка: '+(err?.message||err)); });
  });
})();
</script>

<script>
/* ====== Лайтбокс картинок ====== */
(function(){
  const box = document.getElementById('imgLightbox');
  const img = box.querySelector('.lb-img');
  const btnPrev = box.querySelector('.lb-prev');
  const btnNext = box.querySelector('.lb-next');
  const btnClose= box.querySelector('.lb-close');

  let group=[], idx=0, scale=1;

  document.addEventListener('click', (e)=>{
    const pic = e.target.closest('.news-gallery img');
    if(!pic) return;
    const gal = pic.closest('.news-gallery');
    const images = [...gal.querySelectorAll('img')];
    group = images.map(n=>n.getAttribute('src'));
    idx = images.indexOf(pic);
    open(group[idx], group.length>1);
  });

  function open(src, arrows){
    scale=1; img.style.transform=`scale(${scale})`; img.src=src;
    box.classList.add('open'); box.setAttribute('aria-hidden','false');
    btnPrev.style.display = btnNext.style.display = arrows ? 'block':'none';
  }
  function close(){ box.classList.remove('open'); box.setAttribute('aria-hidden','true'); img.src=''; }
  function step(d){ if(!group.length) return; idx=(idx+d+group.length)%group.length; scale=1; img.style.transform=`scale(${scale})`; img.src=group[idx]; }

  btnPrev.addEventListener('click',e=>{e.stopPropagation();step(-1)});
  btnNext.addEventListener('click',e=>{e.stopPropagation();step(1)});
  btnClose.addEventListener('click',e=>{e.stopPropagation();close()});
  box.addEventListener('click',e=>{ if(e.target===box) close(); });
  document.addEventListener('keydown',e=>{ if(!box.classList.contains('open')) return;
    if(e.key==='Escape') close(); if(e.key==='ArrowLeft') step(-1); if(e.key==='ArrowRight') step(1);
  });
  box.addEventListener('wheel',e=>{ if(!box.classList.contains('open')) return; e.preventDefault();
    const dir=Math.sign(e.deltaY); scale=Math.min(4,Math.max(1, scale - dir*0.1)); img.style.transform=`scale(${scale})`;
  },{passive:false});
  let sx=0; box.addEventListener('touchstart',e=>{sx=e.changedTouches[0].clientX},{passive:true});
  box.addEventListener('touchend',e=>{const dx=e.changedTouches[0].clientX-sx; if(Math.abs(dx)>40) step(dx>0?-1:1)},{passive:true});
})();
</script>
</body>
</html>
