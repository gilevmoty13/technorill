<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>TechnoRill ‚Äî –ë–ª–æ–≥ –æ —Ç–µ—Ö–Ω–∏–∫–µ</title>
  <link rel="icon" href="logo1.png" type="image/png" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"/>

  <style>
    :root{--green:#00cc66;--green2:#00ff80;--bg:#000;}
    body{margin:0;font-family:Arial,sans-serif;color:#ccc;background:#000 url('logo.png') center/contain no-repeat fixed}
    header{background:rgba(0,0,0,.7);text-align:center;padding:40px 20px}
    header img{width:120px;height:auto;border-radius:50%}
    h1{margin-top:20px;font-size:2.5rem;color:var(--green)}
    .content{max-width:800px;margin:40px auto;background:rgba(0,0,0,.75);padding:30px;border-radius:15px}
    .post{margin-bottom:30px}
    h2{color:#eee}
    footer{background:rgba(0,0,0,.7);text-align:center;padding:20px;color:#888}
    a{color:var(--green);cursor:pointer;text-decoration:none;border-bottom:1px dashed var(--green)}
    a:hover{color:var(--green2);border-bottom:1px solid var(--green2)}

    .notification{position:fixed;top:20px;right:20px;background:rgba(0,200,100,.9);color:#fff;padding:10px 20px;border-radius:5px;display:none;z-index:1000}

    .tabs{display:flex;justify-content:center;margin-bottom:30px;border-bottom:1px solid #333}
    .tab{padding:10px 20px;cursor:pointer;color:#888;border-bottom:3px solid transparent;transition:all .3s}
    .tab.active{color:var(--green);border-bottom:3px solid var(--green)}
    .tab:hover{color:var(--green2)}
    .tab-content{display:none}
    .tab-content.active{display:block}

    .news-item{position:relative;background:rgba(30,30,30,.5);padding:15px;margin-bottom:20px;border-radius:8px;border-left:3px solid var(--green)}
    .news-date{color:#888;font-size:.9em;margin-bottom:5px}
    .social-links{display:flex;flex-direction:column;gap:15px;margin-top:20px}
    .social-link{display:flex;align-items:center;padding:12px 16px;background:rgba(50,50,50,.55);border-radius:8px;transition:all .3s;border:1px solid transparent}
    .social-link:hover{background:rgba(70,70,70,.75);border-color:var(--green);transform:translateY(-2px)}
    .social-icon{font-size:22px;margin-right:14px;width:28px;text-align:center}
    .tiktok-icon{color:#fff}.youtube-icon{color:#f00}.instagram-icon{color:#E4405F}

    /* –ü—É–±–ª–∏–∫–∞—Ü–∏—è: –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
    #publishPanel{box-sizing:border-box;width:min(520px,96vw);right:12px;bottom:12px;max-height:90vh;overflow:auto;position:fixed;background:rgba(0,0,0,.92);border:1px solid var(--green);border-radius:12px;padding:16px;z-index:1199;display:none}
    #publishPanel label{display:block;margin:8px 0 6px}
    #publishPanel textarea{width:100%;min-height:160px;resize:vertical}
    #publishPanel input,#publishPanel textarea,#publishPanel button{box-sizing:border-box}
    #publishPanel input,#publishPanel textarea{width:100%;padding:8px;border-radius:8px;border:1px solid #333;background:#000;color:#eee;min-width:0;word-break:break-word}
    #publishPanel .two-col{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    #publishPanel .two-col>div{min-width:0}
    @media (max-width:560px){
      #publishPanel{left:8px;right:8px;top:8px;bottom:8px;width:auto;max-height:calc(100vh - 16px)}
      #publishPanel .two-col{grid-template-columns:1fr}
    }

    /* –ú–æ–¥–∞–ª –ª–æ–≥–∏–Ω–∞ */
    #adminModal{display:none;position:fixed;inset:0;background:rgba(0,0,0,.6);z-index:1200;align-items:center;justify-content:center;padding:12px}
    #adminModal .modal-card{background:#111;border:1px solid var(--green);border-radius:12px;width:min(520px,92vw);max-height:92vh;overflow:auto;padding:20px;box-sizing:border-box;margin:0 auto}
    #adminModal h3{color:var(--green2);margin:0 0 10px}
    #adminModal label{display:block;margin:10px 0 6px}
    #adminModal input{width:100%;padding:10px;border-radius:8px;border:1px solid #333;background:#000;color:#eee;box-sizing:border-box}
    #adminModal .btn-row{display:flex;gap:10px;margin-top:14px}
    #adminModal .btn{padding:8px 14px;border-radius:8px;cursor:pointer}
    #adminModal .btn-primary{border:1px solid var(--green);background:#002d1f;color:var(--green2)}
    #adminModal .btn-ghost{border:1px solid #444;background:#222;color:#bbb}
    #adminErr{color:#ff6b6b;display:none;margin-top:10px}

    /* –ö–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è: –µ—Å—Ç—å –≤ DOM, –Ω–æ –≤–∏–¥–Ω–∞ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ .admin-active –Ω–∞ body */
    .news-del-btn{
      display:none;position:absolute;top:10px;right:10px;
      border:1px solid #444;background:#111;color:#bbb;
      font-size:12px;padding:4px 8px;border-radius:8px;cursor:pointer;
    }
    .admin-active .news-del-btn{display:inline-block}
  </style>
</head>
<body>
  <div class="notification" id="notification">–ü–æ—á—Ç–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞!</div>

  <header>
    <img src="logo1.png" alt="TechnoRill Logo"/>
    <h1>TechnoRill</h1>
    <p>–ë–ª–æ–≥ –æ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è—Ö</p>
  </header>

  <div class="content">
    <div class="tabs">
      <div class="tab active" data-tab="main">–ì–ª–∞–≤–Ω–∞—è</div>
      <div class="tab" data-tab="fresh-news">–°–≤–µ–∂–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ –æ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è—Ö</div>
      <div class="tab" data-tab="news">–ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏</div>
      <div class="tab" data-tab="contacts">–ö–æ–Ω—Ç–∞–∫—Ç—ã</div>
    </div>

    <div id="main" class="tab-content active">
      <div class="post">
        <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</h1>
        <p>–ö–∞–Ω–∞–ª TechnoRill —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–µ—Ç –æ —Ç–µ—Ö–Ω–∏–∫–µ –∏ –≥–∞–¥–∂–µ—Ç–∞—Ö!</p>
      </div>
    </div>

    <div id="fresh-news" class="tab-content">
      <div class="post">
        <h1>–°–≤–µ–∂–∏–µ –Ω–æ–≤–æ—Å—Ç–∏ –æ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è—Ö</h1>
        <p>–ó–¥–µ—Å—å –ø—É–±–ª–∏–∫—É—é—Ç—Å—è —Å–∞–º—ã–µ –Ω–æ–≤—ã–µ –∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –Ω–æ–≤–æ—Å—Ç–∏ –∏–∑ –º–∏—Ä–∞ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π üöÄ</p>
      </div>
    </div>

    <div id="news" class="tab-content">
      <div class="post">
        <h1>–í–∏–¥–µ–æ –∑–∞ –º–µ—Å—è—Ü</h1>
        <!-- NEWS-START -->
<div class="news-item">
  <div class="news-date">2</div>
  <h3>2</h3>
  <p>2</p>
  <div class="social-links">
    <a href="2" target="_blank" class="social-link"><i class="fab fa-tiktok social-icon tiktok-icon"></i><div><div class="social-text">TikTok</div></div></a>
    <a href="2" target="_blank" class="social-link"><i class="fab fa-youtube social-icon youtube-icon"></i><div><div class="social-text">YouTube</div></div></a>
    <a href="2" target="_blank" class="social-link"><i class="fab fa-instagram social-icon instagram-icon"></i><div><div class="social-text">Instagram*</div></div></a>
  </div>
  <button class="news-del-btn" title="–£–¥–∞–ª–∏—Ç—å">–£–¥–∞–ª–∏—Ç—å</button>
</div>

        <!-- NEWS-END -->
      </div>
    </div>

    <div id="contacts" class="tab-content">
      <div class="post">
        <h2>–ö–æ–Ω—Ç–∞–∫—Ç—ã</h2>
        <p>–ü—Ä–∏–≤–µ—Ç! –ú–µ–Ω—è –∑–æ–≤—É—Ç –ö–∏—Ä–∏–ª–ª –∏ —è –≤–µ–¥—É—â–∏–π –¥–∞–Ω–Ω–æ–≥–æ –∫–∞–Ω–∞–ª–∞.</p>
        <p><strong>–ü–æ—á—Ç–∞ –¥–ª—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π:</strong>
          <span id="email" style="color:var(--green);cursor:pointer;border-bottom:1px dashed var(--green);">garkovivan8430@gmail.com</span>
          <span style="margin-left:5px;font-size:.9em;color:#888">(–∫–ª–∏–∫–Ω–∏—Ç–µ —á—Ç–æ–±—ã —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å)</span>
        </p>
        <p><strong>–ü–æ –≤–æ–ø—Ä–æ—Å–∞–º –ø–∏—Å–∞—Ç—å:</strong>
          <a href="https://t.me/kiril_podderzka_Not_Bot" target="_blank" class="telegram-link">t.me/kiril_podderzka_Not_Bot</a>
        </p>
      </div>
    </div>
  </div>

  <footer>
    ¬© 2025 –ö–∏—Ä–∏–ª–ª.
    <p style="margin-top:10px;font-size:.8em;">*–∫–æ–º–ø–∞–Ω–∏—è Meta –ø—Ä–∏–∑–Ω–∞–Ω–∞ —ç–∫—Å—Ç—Ä–µ–º–∏—Å—Ç—Å–∫–æ–π –Ω–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ –†–æ—Å—Å–∏–∏</p>
  </footer>

  <!-- –ú–æ–¥–∞–ª –ª–æ–≥–∏–Ω–∞ -->
  <div id="adminModal">
    <div class="modal-card">
      <h3>–í—Ö–æ–¥ –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h3>
      <label>–õ–æ–≥–∏–Ω</label>
      <input id="adminLogin" type="text" placeholder="–õ–æ–≥–∏–Ω"/>
      <label>–ü–∞—Ä–æ–ª—å</label>
      <input id="adminPass" type="password" placeholder="–ü–∞—Ä–æ–ª—å"/>
      <div class="btn-row">
        <button id="adminLoginBtn" class="btn btn-primary">–í–æ–π—Ç–∏</button>
        <button id="adminCancelBtn" class="btn btn-ghost">–û—Ç–º–µ–Ω–∞</button>
      </div>
      <p id="adminErr">–ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</p>
    </div>
  </div>

  <!-- –ü–∞–Ω–µ–ª—å –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ -->
  <div id="publishPanel">
    <div style="display:flex;justify-content:space-between;align-items:center;gap:8px;margin-bottom:8px;">
      <strong style="color:var(--green2)">–ü—É–±–ª–∏–∫–∞—Ü–∏—è –Ω–æ–≤–æ—Å—Ç–∏</strong>
      <button id="closePublish" title="–°–≤–µ—Ä–Ω—É—Ç—å" style="border:1px solid #444;background:#111;color:#bbb;border-radius:8px;padding:6px 10px;cursor:pointer;">√ó</button>
    </div>
    <label>–î–∞—Ç–∞ (—Ç–µ–∫—Å—Ç):</label>
    <input id="fDate" type="text" placeholder="27 —Å–µ–Ω—Ç—è–±—Ä—è 2025" />

    <label>–ó–∞–≥–æ–ª–æ–≤–æ–∫:</label>
    <input id="fTitle" type="text" placeholder="–í—ã—à–ª–æ –Ω–æ–≤–æ–µ –≤–∏–¥–µ–æ!" />

    <label>–û–ø–∏—Å–∞–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ):</label>
    <input id="fDesc" type="text" placeholder="–ö–æ—Ä–æ—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ" />

    <div class="two-col">
      <div>
        <label>TikTok —Å—Å—ã–ª–∫–∞:</label>
        <input id="fTikTok" type="url" placeholder="https://www.tiktok.com/..." />
      </div>
      <div>
        <label>YouTube —Å—Å—ã–ª–∫–∞:</label>
        <input id="fYouTube" type="url" placeholder="https://youtube.com/..." />
      </div>
      <div>
        <label>Instagram —Å—Å—ã–ª–∫–∞:</label>
        <input id="fInsta" type="url" placeholder="https://www.instagram.com/reel/..." />
      </div>
    </div>

    <button id="publishBtn" style="margin-top:12px;padding:10px 14px;border-radius:8px;border:1px solid var(--green);background:#002d1f;color:var(--green2);cursor:pointer;width:100%;">–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å</button>

    <div id="exportWrap" style="display:none;margin-top:12px;">
      <p style="margin:6px 0 4px;color:#9fe6c3;">–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —ç—Ç–æ—Ç HTML –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤ –∫–æ–¥ (–µ—Å–ª–∏ –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ—Ç–∫–ª—é—á–µ–Ω–æ):</p>
      <textarea id="exportHtml" rows="8" style="width:100%;background:#000;color:#eee;border:1px solid #333;border-radius:8px;padding:8px;"></textarea>
      <button id="copyExport" style="margin-top:8px;padding:8px 12px;border-radius:8px;border:1px solid var(--green);background:#002d1f;color:var(--green2);cursor:pointer;">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å</button>
    </div>
  </div>

  <script>
    /********* –≤–∫–ª–∞–¥–∫–∏ + –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—á—Ç—ã *********/
    document.addEventListener('DOMContentLoaded', () => {
      const emailEl = document.getElementById('email');
      const note = document.getElementById('notification');
      if (emailEl) {
        emailEl.addEventListener('click', () => {
          const tmp = document.createElement('input');
          tmp.value = 'garkovivan8430@gmail.com';
          document.body.appendChild(tmp);
          tmp.select();
          document.execCommand('copy');
          document.body.removeChild(tmp);
          note.style.display='block'; setTimeout(()=>note.style.display='none', 1800);
        });
      }
      document.querySelectorAll('.tab').forEach(tab=>{
        tab.addEventListener('click', ()=>{
          const target = tab.dataset.tab;
          document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
          document.querySelectorAll('.tab-content').forEach(c=>c.classList.remove('active'));
          tab.classList.add('active'); document.getElementById(target).classList.add('active');
        });
      });
    });
  </script>

  <!-- –ê–¥–º–∏–Ω-–ª–æ–≥–∏–∫–∞: –≤—Ö–æ–¥, –ø—É–±–ª–∏–∫–∞—Ü–∏—è, —É–¥–∞–ª–µ–Ω–∏–µ -->
  <script>
  (function(){
    /* ====== –ù–ê–°–¢–†–û–ô–ö–ò ====== */
    const WORKER_BASE = 'https://falling-term-2b37.garkovkirill.workers.dev'; // —Ç–≤–æ–π –≤–æ—Ä–∫–µ—Ä
    const ADMIN_KEY   = '30Mu30Fasa';                                       // x-admin-key
    const SALT = 'trill#2025';
    const HASH_LOGIN = '01001e8a19aa584d87efe4ebbd09ec191267921d39e1f845a4ac932916de1323'; // Techno RiLL
    const HASH_PASS  = '7491d3a47818924589874ef588685df9e0f2e2fd21122f34a4a427b7d9360d46'; // 300302Mufasa

    async function sha256Hex(str){
      const data = new TextEncoder().encode(SALT+str);
      const buf  = await crypto.subtle.digest('SHA-256', data);
      return Array.from(new Uint8Array(buf)).map(b=>b.toString(16).padStart(2,'0')).join('');
    }

    const adminModal = document.getElementById('adminModal');
    const adminLoginBtn = document.getElementById('adminLoginBtn');
    const adminCancelBtn= document.getElementById('adminCancelBtn');
    const adminErr = document.getElementById('adminErr');
    const loginInput = document.getElementById('adminLogin');
    const passInput  = document.getElementById('adminPass');

    const PUBLISH_PANEL = document.getElementById('publishPanel');
    const closePublish  = document.getElementById('closePublish');

    const fDate   = document.getElementById('fDate');
    const fTitle  = document.getElementById('fTitle');
    const fDesc   = document.getElementById('fDesc');
    const fTikTok = document.getElementById('fTikTok');
    const fYouTube= document.getElementById('fYouTube');
    const fInsta  = document.getElementById('fInsta');

    const publishBtn = document.getElementById('publishBtn');
    const exportWrap = document.getElementById('exportWrap');
    const exportHtml = document.getElementById('exportHtml');
    const copyExport = document.getElementById('copyExport');

    function openLoginModal(){
      adminErr.style.display='none'; loginInput.value=''; passInput.value='';
      adminModal.style.display='flex'; setTimeout(()=>loginInput.focus(),0);
    }
    function enterAdminUi(){
      document.body.classList.add('admin-active');
      PUBLISH_PANEL.style.display='block';
      PUBLISH_PANEL.scrollTop=0;
    }
    function exitAdminUi(){
      document.body.classList.remove('admin-active');
      PUBLISH_PANEL.style.display='none';
    }

    // –≥–æ—Ä—è—á–∏–µ –∫–ª–∞–≤–∏—à–∏
    document.addEventListener('keydown',(e)=>{
      const isCtrl=(e.ctrlKey||e.metaKey), key=e.key.toLowerCase();
      if(isCtrl && key==='a'){ e.preventDefault(); openLoginModal(); }
      if(key==='escape'){ if(adminModal.style.display==='flex') adminModal.style.display='none'; if(PUBLISH_PANEL.style.display==='block') exitAdminUi(); }
    });

    adminCancelBtn.addEventListener('click', ()=> adminModal.style.display='none');
    adminModal.addEventListener('click', (e)=>{ if(e.target===adminModal) adminModal.style.display='none'; });
    closePublish.addEventListener('click', ()=> exitAdminUi());

    async function tryLogin(){
      try{
        const okLogin=(await sha256Hex(loginInput.value.trim()))===HASH_LOGIN;
        const okPass =(await sha256Hex(passInput.value))===HASH_PASS;
        if(okLogin&&okPass){ adminErr.style.display='none'; adminModal.style.display='none'; enterAdminUi(); }
        else adminErr.style.display='block';
      }catch(e){ console.error(e); adminErr.style.display='block';}
    }
    adminLoginBtn.addEventListener('click', tryLogin);
    passInput.addEventListener('keydown',(e)=>{ if(e.key==='Enter') tryLogin(); });

    /* ===== –ü—É–±–ª–∏–∫–∞—Ü–∏—è ===== */
    function escapeHtml(s){ return (s??'').toString().replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;'); }
    function link(href, icon, txt, cls){ return href?`<a href="${href}" target="_blank" class="social-link"><i class="${icon} social-icon ${cls||''}"></i><div><div class="social-text">${txt}</div></div></a>`:''; }
    function buildNewsHTML(data){
      return `
<div class="news-item">
  <div class="news-date">${escapeHtml(data.date)}</div>
  <h3>${escapeHtml(data.title)}</h3>
  ${data.desc?`<p>${escapeHtml(data.desc)}</p>`:''}
  <div class="social-links">
    ${link(data.tiktok,'fab fa-tiktok','TikTok','tiktok-icon')}
    ${link(data.youtube,'fab fa-youtube','YouTube','youtube-icon')}
    ${link(data.insta,'fab fa-instagram','Instagram*','instagram-icon')}
  </div>
  <button class="news-del-btn" title="–£–¥–∞–ª–∏—Ç—å">–£–¥–∞–ª–∏—Ç—å</button>
</div>`.trim();
    }
    function getNewsPostWrap(){ return document.querySelector('#news .post'); }
    function reindexNews(){
      const list = document.querySelectorAll('#news .post .news-item');
      list.forEach((el,i)=> el.dataset.index=i);
    }
    publishBtn.addEventListener('click', ()=>{
      const data={
        date: fDate.value.trim() || new Date().toLocaleDateString('ru-RU',{day:'2-digit',month:'long',year:'numeric'}),
        title: fTitle.value.trim(),
        desc: fDesc.value.trim(),
        tiktok: fTikTok.value.trim(), youtube: fYouTube.value.trim(), insta: fInsta.value.trim()
      };
      if(!data.title){ alert('–£–∫–∞–∂–∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫.'); return; }
      if(!data.tiktok && !data.youtube && !data.insta){ alert('–î–æ–±–∞–≤—å —Ö–æ—Ç—è –±—ã –æ–¥–Ω—É —Å—Å—ã–ª–∫—É.'); return; }

      const wrap=getNewsPostWrap(); if(!wrap){ alert('–°–µ–∫—Ü–∏—è –Ω–æ–≤–æ—Å—Ç–µ–π –Ω–µ –Ω–∞–π–¥–µ–Ω–∞.'); return; }

      const html=buildNewsHTML(data);
      // –≤—Å—Ç–∞–≤–∫–∞ –ø–æ—Å–ª–µ –º–∞—Ä–∫–µ—Ä–∞
      wrap.innerHTML = wrap.innerHTML.replace('<!-- NEWS-START -->','<!-- NEWS-START -->\n'+html+'\n');
      reindexNews();

      exportWrap.style.display='block'; exportHtml.value=html;

      if(!/^https?:\/\//.test(WORKER_BASE)){ alert('WORKER_BASE –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω.'); return; }

      fetch(WORKER_BASE+'/publish',{
        method:'POST',
        headers:{'Content-Type':'application/json','x-admin-key':ADMIN_KEY},
        body:JSON.stringify(data)
      }).then(async (r)=>{
        const text=await r.text(); let j; try{j=JSON.parse(text);}catch{}
        if(!r.ok || !j?.ok){ console.error('Publish error',r.status,text); alert('–û—à–∏–±–∫–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ ('+r.status+'): '+text); }
        else alert('–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ –≤ GitHub.');
      }).catch(err=>{ console.error(err); alert('–°–µ—Ç–µ–≤–∞—è –æ—à–∏–±–∫–∞: '+(err?.message||err)); });
    });
    copyExport.addEventListener('click', ()=>{ exportHtml.select(); document.execCommand('copy'); });

    /* ===== –£–¥–∞–ª–µ–Ω–∏–µ (–ø–æ –∏–Ω–¥–µ–∫—Å—É) ===== */
    document.addEventListener('click', (e)=>{
      const btn = e.target.closest('.news-del-btn');
      if(!btn) return;
      if(!document.body.classList.contains('admin-active')) return;
      const item = btn.closest('.news-item');
      const wrap = getNewsPostWrap();
      if(!item||!wrap) return;

      // –∏–Ω–¥–µ–∫—Å —Å—Ä–µ–¥–∏ —Ç–µ–∫—É—â–∏—Ö –∫–∞—Ä—Ç–æ—á–µ–∫
      reindexNews();
      const idx = parseInt(item.dataset.index || '-1',10);
      if(isNaN(idx)||idx<0){ alert('–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏–Ω–¥–µ–∫—Å –∑–∞–ø–∏—Å–∏.'); return; }

      if(!confirm('–£–¥–∞–ª–∏—Ç—å —ç—Ç—É –ø—É–±–ª–∏–∫–∞—Ü–∏—é?')) return;

      // —É–±—Ä–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ
      item.remove(); reindexNews();

      // –ø–æ–ø—ã—Ç–∫–∞ —É–¥–∞–ª–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
      fetch(WORKER_BASE+'/delete',{
        method:'POST',
        headers:{'Content-Type':'application/json','x-admin-key':ADMIN_KEY},
        body:JSON.stringify({ index: idx })
      }).then(async r=>{
        const t=await r.text(); let j; try{j=JSON.parse(t);}catch{}
        if(!r.ok || !j?.ok){
          console.error('Delete error', r.status, t);
          alert('–£–¥–∞–ª–µ–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –Ω–µ —É–¥–∞–ª–æ—Å—å ('+r.status+'). –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å–∫—Ä—ã—Ç–∞ –ª–æ–∫–∞–ª—å–Ω–æ, –Ω–æ –≤–µ—Ä–Ω—ë—Ç—Å—è –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏, –µ—Å–ª–∏ –Ω–µ –æ–±–Ω–æ–≤–∏—Ç—å —Ñ–∞–π–ª –≤—Ä—É—á–Ω—É—é/—á–µ—Ä–µ–∑ –≤–æ—Ä–∫–µ—Ä.');
        } else {
          alert('–£–¥–∞–ª–µ–Ω–æ –∏–∑ GitHub.');
        }
      }).catch(err=>{
        console.error(err);
        alert('–°–µ—Ç–µ–≤–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏: '+(err?.message||err));
      });
    });

    // –ø–µ—Ä–≤–∏—á–Ω–∞—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è
    reindexNews();
  })();
  </script>
</body>
</html>
